---
- name: Container Network Interface plugin
  include_role:
    name: network_plugin/cni
  when: kube_network_plugin != 'none'

- name: Network plugin
  include_role:
    name: "network_plugin/{{ kube_network_plugin }}"
    apply:
      tags:
        - "{{ kube_network_plugin }}"
        - network
  when:
    - kube_network_plugin != 'none'
  tags:
    - cilium
    - calico
    - flannel
    - macvlan
    - kube-ovn
    - kube-router
    - custom_cni

- name: Cilium additional
  include_role:
    name: network_plugin/cilium
    apply:
      tags:
        - cilium
        - network
  when:
    - kube_network_plugin != 'cilium'
    - cilium_deploy_additionally
  tags:
    - cilium

- name: Multus
  include_role:
    name: network_plugin/multus
    apply:
      tags:
        - multus
        - network
  when: kube_network_plugin_multus
  tags:
    - multus

- name: SR-IOV Network Operator
  include_role:
    name: network_plugin/sriov
    apply:
      tags:
        - sriov
        - network
  when: kube_network_plugin_sriov
  tags:
    - sriov
